{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    </head>
<body>

<nav class="navbar navbar-expand-lg">
    </nav>

<div class="d-flex">
    <div class="sidebar">
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">
            Gestión de Contenido
        </h6>
        <ul class="nav flex-column mb-2" id="sidebarNav">
            <li class="nav-item">
                <a class="nav-link active" href="{% url 'admin:index' %}" target="contentFrame">
                    <i class="fa-solid fa-tachometer-alt me-2"></i> Dashboard Admin
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:CasaReposo_ratecategory_changelist' %}" target="contentFrame">
                    <i class="fa-solid fa-file-invoice-dollar me-2"></i> Tarifas de Estadía
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:CasaReposo_roomtype_changelist' %}" target="contentFrame">
                    <i class="fa-solid fa-bed me-2"></i> Tipos de Habitación
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:CasaReposo_includedservice_changelist' %}" target="contentFrame">
                    <i class="fa-solid fa-list-check me-2"></i> Servicios Incluidos
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:CasaReposo_optionalservice_changelist' %}" target="contentFrame">
                    <i class="fa-solid fa-hand-holding-dollar me-2"></i> Servicios Opcionales
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:CasaReposo_galleryphoto_changelist' %}" target="contentFrame">
                    <i class="fa-solid fa-images me-2"></i> Galería (Subir/Eliminar)
                </a>
            </li>
            
            <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:CasaReposo_carouselimage_changelist' %}" target="contentFrame">
                    <i class="fa-solid fa-camera-retro me-2"></i> Carrusel
                </a>
            </li>
            
             <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:CasaReposo_contactmessage_changelist' %}" target="contentFrame">
                    <i class="fa-solid fa-envelope-open-text me-2"></i> Mensajes del Formulario
                </a>
            </li>
        </ul>
        
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">
            Administración Avanzada
        </h6>
        <ul class="nav flex-column mb-2">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'admin:index' %}" target="_blank">
                    <i class="fa-solid fa-user-shield me-2"></i> Administrar Usuarios
                </a>
            </li>
        </ul>
    </div>

    <div class="main-content flex-grow-1">
        <iframe 
            name="contentFrame" 
            src="{% url 'admin:index' %}" 
            style="width: 100%; height: 85vh; border: none; background-color: white;"
            onload="adjustIframeHeight(this)"
        >
        </iframe>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const sidebarLinks = document.querySelectorAll('.sidebar .nav-link');
        const iframe = document.getElementById('contentFrame'); // No necesitamos el ID si usamos 'name'

        // 1. Manejar el estado activo de los enlaces
        sidebarLinks.forEach(link => {
            link.addEventListener('click', function() {
                // Remover 'active' de todos
                sidebarLinks.forEach(l => l.classList.remove('active'));
                // Añadir 'active' solo al clicado
                this.classList.add('active');
            });
        });

        // 2. Función para manejar la altura del Iframe (opcional, pero mejora la experiencia)
        // Nota: Debido a las restricciones de seguridad (Same-Origin Policy), 
        // ajustar la altura automáticamente puede fallar al cargar el /admin/.
        // Usaremos una altura fija (85vh) en el HTML.

        // 3. Manejar el Logout
        // Aseguramos que la navegación no se rompa al hacer logout.
        document.querySelector('form[action*="logout"]').addEventListener('submit', function(e) {
            // El logout debe redirigir a la página de login, no al iframe.
            this.target = '_top'; 
        });
    });
</script>
</body>
</html>